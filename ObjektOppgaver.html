<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Objekter</title>

    <style>
    p{
        max-width: 400px;
    }
    </style>
</head>
<body>

<p>
Her er det flere eksempler for å jobbe med objekter og arrays.

a
</p>


<script>

let arr = [5, 3, 7, 2, 7, 6, 1, 9, 1];

/* Bruk filter() til å lage en array som kun inneholder tall høyere enn 5 */
let aboveFive1 = arr.filter(number => number > 5);
console.log("First filter: " + aboveFive1);

/* filter() går gjennom et array, ett element av gangen. I dette tilfellet blir hvert tall lagt
   i variablen "number", og "number" blir lagt til i en array i aboveFive1 hvis "number > 5" er lik
   "true" */

/* En "arrow function" som den over kan være vanskelig å forstå, og vanskelig å bruke ved mer
   komplekse oppgaver. Da kan det utvides til en anonym funksjon som den under */

let aboveFive2 = arr.filter(function (number){
    if(number > 5){
        return(number);
    }
    else{
        return;
    }
});
console.log("Second filter: " + aboveFive2);

/* Hvis man ønsker så kan det utvides videre til en egen funksjon. Dette er spesielt praktisk
   hvis det er noe som skal brukes flere steder i koden, eller for å gjøre koden mer oversiktlig. */

let aboveFive3 = arr.filter(numbersOverFive);

function numbersOverFive(number){
    if(number > 5){
        return(number);
    }
}
console.log("Third filter: " + aboveFive3);
/* Hvis "else" ikke skal retunere noen verdier, så kan den droppes */

/* Hvis man skal gjøre liknende oppgaver med objekter blir det noe vanskeligere, siden man ikke kan bruke
   filter() direkte på et objekt. Så vi kan starte med et enkelt objekt: */

let model = {
    a: 5,
    b: 9,
    c: 1,
    d: 7,
    e: 2,
    f: 6,
    g: 4,
}

console.log('Verdier i objekter:');
/* Først er det greit å vite om de forskjellige måtene å få tak i verdier i et objekt.
   Alle disse tre gjør det samme: */

console.log(model.b);
console.log(model['b']);
let someVariable = 'b';
console.log(model[someVariable]);

/* Den tredje varianten er nyttig, siden hvis man har et array med navnet på alle elementene i objektet så kan
   man gå gjennom objektet på nesten samme måte som et array. */

/* Her kommer keys() til nytte: */

let namesInObject = Object.keys(model);
console.log(namesInObject);

/* Man kan ikke bruke filter() her, men det er liknende måter for å gjøre det samme */
/* For eksempel forEach() "gjør noe" med hvert element i et array. Her er det alternativer for ting som å lage
   et array med bare verdiene over 5, array med navnene som har verdier over 5, eller lage et nytt objekt
   med de riktige elementene. */
let aboveFiveArrayValues = [];
let aboveFiveArrayNames = [];
let aboveFiveObject = {};
let aboveFive4 = namesInObject.forEach(function (name){
    if(model[name] > 5){
        aboveFiveArrayValues.push(model[name]);
        aboveFiveArrayNames.push(name);
        aboveFiveObject[name] = model[name];
    }
});
console.log(aboveFiveArrayValues);
console.log(aboveFiveArrayNames);
console.log(aboveFiveObject);


/* Hvis man derimot har et array med objekter, så kan filter() brukes for å få tak i de riktige objektene. */

let arrayWithObjects = [
    {
        x: 2,
        y: 7,
        z: 4,
    },
    {
        x: 6,
        y: 7,
        z: 1,
    },
    {
        x: 1,
        y: 3,
        z: 5,
    },
    {
        x: 2,
        y: 4,
        z: 1,
    },
    {
        x: 7,
        y: 2,
        z: 2,
    },
]
/* For eksempel her blir det laget et nytt objekt med bare objektene der "a" er større enn 5: */
let filteredArrayWithObjects = arrayWithObjects.filter(obj => obj.a > 5);
console.log("Objekter i liste:", filteredArrayWithObjects);


/* En annen ting som kan være lurt er å kunne sortere et array med objekter. */
/* Men først et eksempel på hvordan sort() kan brukes på et enkelt array: */

//arr.sort((a, b) => a - b);
//console.log(arr);

/* sort() kan være vanskelig å forstå, men den sammenlikner to verdier (i dette tilfellet a og b)
   fra et array, og returnerer dem i rekkefølge basert på sammenlikningen. Hvis sammenlikningen "a - b"
   enders til "b - a" det sorteres i synkende rekkefølge istedet for stigende. */

/* Det er viktig å vite at sort() direkte endrer det arrayet det blir brukt på. Derfor er den kommentert
   ut her, så den ikke påvirker de første eksemplene. */

/* Å sortere objekter i et array er veldig likt, men man må spesifisere hvilken hverdi i hvert
   objekt som skal sammenliknes. Her sorteres det etter verdiene i x: */

//arrayWithObjects.sort((a, b) => a.x - b.x);
//console.log(arrayWithObjects);

/* Det er også mulig å sortere etter en sekunder verdi hvis den første er lik.
   Her blir objektene sortert etter x, men blir sortert etter y hvis x er like. */

arrayWithObjects.sort((a, b) => a.x - b.x || a.y - b.y);
console.log(arrayWithObjects);

</script>

</body>
</html>